document.addEventListener("DOMContentLoaded",function(){let cifra="";let cifra2="";let operador="";let visual="";const display=document.getElementById("display");const botones=document.querySelectorAll(".numero");for(let i=0;i<botones.length;i++){botones[i].addEventListener("click",function(){const valor=this.value;const digito=valor===","?".":valor;if(!isNaN(valor)||valor===","||valor==="."){if(operador===""){cifra=(cifra+digito).replace(/^0+(?=\d)/,"");visual=cifra}else{cifra2=(cifra2+digito).replace(/^0+(?=\d)/,"");visual=cifra+operador+cifra2}
display.value=visual}else if(["+","-","*","/"].includes(valor)){if(operador===""){operador=valor;visual=cifra+operador;display.value=visual}}})}
const igual=document.querySelector(".igual");igual.addEventListener("click",function(){if(cifra!==""&&cifra2!==""&&operador!==""){const resultado=eval(`${cifra}${operador}${cifra2}`);visual+="="+resultado;display.value=visual;cifra=resultado.toString();cifra2="";operador="";visual=cifra}});const borrar=document.querySelector(".borrar");borrar.addEventListener("click",function(){cifra="";cifra2="";operador="";visual="";display.value=""});document.addEventListener("keydown",function(e){const tecla=e.key;if(!isNaN(tecla)){simularClick(tecla)}else if(["+","-","*","/"].includes(tecla)){simularClick(tecla)}else if(tecla===","||tecla==="."){simularClick(",")}else if(tecla==="Enter"){igual.click()}else if(tecla==="Backspace"||tecla==="Escape"){borrar.click()}});function simularClick(valor){const botones=document.querySelectorAll(".numero");botones.forEach((boton)=>{if(boton.value===valor){boton.classList.add("activo");boton.click();setTimeout(()=>{boton.classList.remove("activo")},200)}})}})